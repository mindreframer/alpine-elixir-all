#!/usr/bin/env node
var fs = require('fs')

var asShortVersion = function(version){
  return version.split(".").slice(0,2).join(".")
}

var erlangVersion = fs.readFileSync('erlang/VERSION', 'utf8').trim();
var elixirVersion = fs.readFileSync('elixir/VERSION', 'utf8').trim();

var erlangVersionShort = asShortVersion(erlangVersion)
var elixirVersionShort = asShortVersion(elixirVersion)


var matrix = {
  erlang: [
    "mindreframer/alpine-erlang:latest",
    "mindreframer/alpine-erlang:" + erlangVersion,
    "mindreframer/alpine-erlang:" + erlangVersionShort,
  ],
  elixir: [
    "mindreframer/alpine-elixir:latest",
    "mindreframer/alpine-elixir:" + elixirVersion,
    "mindreframer/alpine-elixir:" + elixirVersionShort,
  ],
  phoenix: [
    "mindreframer/alpine-elixir-phoenix:latest",
    "mindreframer/alpine-elixir-phoenix:" + elixirVersion,
    "mindreframer/alpine-elixir-phoenix:" + elixirVersionShort,
  ]
}

console.log(JSON.stringify(matrix))